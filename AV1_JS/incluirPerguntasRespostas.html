<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Incluir Perguntas e Respostas</title>
    <script>
        function EnviarPergunta() {

            if (!ValidaForm()) {
                return;
            }

            let pergunta = document.getElementById("pergunta").value;
            let id = document.getElementById("idPergunta").value;
            let tipo = document.getElementById("tipo").value;
            let a = document.getElementById("a").value;
            let b = document.getElementById("b").value;
            let c = document.getElementById("c").value;
            let d = document.getElementById("d").value;
            let e = document.getElementById("e").value;
            let resposta = document.getElementById("resposta").value;
            let respostaTexto = document.getElementById("respostaTexto").value;

            console.log ("Enviando dados");

            let xmlhttp = new XMLHttpRequest();
            xmlhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    document.getElementById("msg").innerHTML = this.responseText;
                } else if (this.readyState < 4) {
                    console.log("A requisição está em andamento.");
                } else {
                    console.log("Requisição falhou: " + this.status);
                }
            }

            xmlhttp.open("GET", "incluirPerguntasRespostas.php?" +
                            "pergunta=" + pergunta + 
                            "&idPergunta=" + id + 
                            "&tipo=" + tipo + 
                            "&a=" + a + 
                            "&b=" + b + 
                            "&c=" + c + 
                            "&d=" + d + 
                            "&e=" + e + 
                            "&resposta=" + resposta + 
                            "&respostaTexto=" + respostaTexto);
            xmlhttp.send();
        }

        function ValidaForm() {
            let pergunta = document.getElementById("pergunta").value;
            let id = document.getElementById("idPergunta").value;

            let msg = "";
            if (!pergunta) msg += "A pergunta não foi preenchida. <br>";
            if (!id) msg += "O ID da pergunta não foi preenchido. <br>";
            
            if (msg != "") {
                document.getElementById("msg").innerHTML = msg;
                return false;
            }
            return true;
        }
    </script>
</head>
<body>
    <header>
        <ul>
            <li><a href="incluir.php">Incluir Usuário</a></li>
            <li><a href="alterar.php">Alterar Usuário</a></li>
            <li><a href="excluir.php">Excluir Usuário</a></li>
            <li><a href="listar.php">Listar Usuário</a></li>
            <li><a href="incluirPerguntasRespostas.php">Incluir Perguntas e Respostas</a></li>
            <li><a href="alterarPerguntasRespostas.php">Alterar Perguntas e Respostas</a></li>
            <li><a href="excluirPerguntasRespostas.php">Excluir Perguntas e Respostas</a></li>
            <li><a href="listarPerguntasRespostas.php">Listar Perguntas e Respostas</a></li>
            <li><a href="listarUmaPergunta.php">Listar Uma Pergunta</a></li>
        </ul>
    </header>

    <h1>Incluir Pergunta e Respostas</h1>
    <form name="formPergunta" id="formPergunta">
        Pergunta: <input type="text" id="pergunta" name="pergunta" required> <br>
        Id: <input type="text" id="idPergunta" name="idPergunta" required> <br>

        Tipo: 
        <select id="tipo" name="tipo">
            <option value="multipla">Múltipla Escolha</option>
            <option value="texto">Resposta em Texto</option>
        </select>
        <br>
        Alternativa A: <input type="text" id="a" name="a"> <br>
        Alternativa B: <input type="text" id="b" name="b"> <br>
        Alternativa C: <input type="text" id="c" name="c"> <br>
        Alternativa D: <input type="text" id="d" name="d"> <br>
        Alternativa E: <input type="text" id="e" name="e"> <br>

        Alternativa correta: <input type="text" id="resposta" name="resposta"> <br>
        Resposta Texto: <input type="text" id="respostaTexto" name="respostaTexto"> <br>

        <input type="button" value="Enviar" onclick="EnviarPergunta();">
    </form>

    <p id="msg"></p>
</body>
</html>
